/**
 * 무효 트래픽 방지 스크립트 (압축 버전)
 * GitHub: https://github.com/facemartin/traffic-protection/
 */
!function(){if(window.TrafficProtection)return;const t=document.currentScript||(()=>{const t=document.getElementsByTagName("script");return t[t.length-1]})(),e={clickThreshold:7,timeWindow:1e4,cookieExpiry:86400,redirectDelay:1500,redirectUrl:"https://ecrm.police.go.kr/minwon/main"};t&&(t.dataset.clickThreshold&&(e.clickThreshold=parseInt(t.dataset.clickThreshold,10)),t.dataset.timeWindow&&(e.timeWindow=parseInt(t.dataset.timeWindow,10)),t.dataset.redirectUrl&&(e.redirectUrl=t.dataset.redirectUrl));let i=0,n=0,r=!1;function c(t,e,i){const n=new Date;n.setTime(n.getTime()+1e3*i);const r="expires="+n.toUTCString();document.cookie=t+"="+e+";"+r+";path=/"}function o(t){const e=t+"=",i=document.cookie.split(";");for(let t=0;t<i.length;t++){let n=i[t].trim();if(0===n.indexOf(e))return n.substring(e.length,n.length)}return""}function d(){const t=Date.now();t-n>e.timeWindow&&(i=0),i++,n=t,i>e.clickThreshold&&(r=!0,c("clickLimit","true",e.cookieExpiry))}function a(t){if(r)return setTimeout(()=>{window.location.href=e.redirectUrl},500),!1;if("true"===o("clickLimit"))return setTimeout(()=>{window.location.href=e.redirectUrl},500),!1;return setTimeout(()=>{window.location.href=t},e.redirectDelay),!0}function l(){const t=document.querySelectorAll('a[href^="http"]');t.forEach(t=>{t.href.includes(window.location.hostname)||t.addEventListener("click",e=>{e.preventDefault(),a(t.href)})});const e=document.querySelector(".post-content")||document.body;if(e){const t=e.querySelectorAll("h2, h4"),i=(document.querySelector("#floating-link")||{}).href||"https://investory.store/2025-%eb%af%bc%ec%83%9d%ed%9a%8c%eb%b3%b5%ec%a7%80%ec%9b%90%ea%b8%88-25%eb%a7%8c%ec%9b%90-%ec%a7%80%ea%b8%88-%ec%8b%a0%ec%b2%ad%ed%95%98%ec%84%b8%ec%9a%94/";t.forEach(t=>{t.style.cursor="pointer",t.addEventListener("click",t=>{t.preventDefault(),a(i)})}),e.addEventListener("click",t=>{"IMG"===t.target.tagName&&(t.preventDefault(),a(i))});const n=document.getElementById("floating-link");n&&n.addEventListener("click",t=>{t.preventDefault(),a(n.href)})}}function s(){"true"===o("clickLimit")&&(r=!0),document.addEventListener("click",d),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l()}s()}();
